events {}
http {
  include mime.types;

  server {
    listen 80 default deferred;

    # root /usr/share/nginx/html/;

    # Nginx and Angularjs with html mode 5 - https://gist.github.com/cjus/b46a243ba610661a7efb
    index index.html;

    location /images/ {
      rewrite ^ https://dt7zex2d2lk4u.cloudfront.net$request_uri? permanent;
    }

    location /dev/ {
      alias /usr/share/nginx/html/dev/;
      # root /usr/share/nginx/html/dev/;
      # if (!-e $request_filename) {
      #   rewrite ^[^.]*$ /dev/index.html last;
      # }
      # try_files $uri $uri/ /dev/index.html;
      try_files $uri $uri/ index.html =404;
    }

    location / {
      alias /usr/share/nginx/html/;
      try_files $uri $uri/ /index.html;
    }

    error_log  /var/log/nginx/local.error_log  debug;
  }
}